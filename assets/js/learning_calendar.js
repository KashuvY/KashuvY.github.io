document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("learning-calendar-grid-container"),t=document.getElementById("learning-details-display"),n=document.getElementById("learning-day-header"),i=document.getElementById("learning-day-activities"),a=document.getElementById("learningsData");if(!(e&&t&&n&&i&&a))return;let r=[];try{r=JSON.parse(a.textContent)}catch(d){return void console.error("Error parsing learning data JSON:",d)}if(!Array.isArray(r))return void console.error("Learning data is not an array:",r);let o=null;e.addEventListener("click",function(e){const a=e.target.closest(".day-cell.has-learning");if(!a)return;const c=a.dataset.date;if(!c)return void console.warn("Clicked cell is missing data-date attribute.");const s=r.find(e=>e.date===c);if(o&&o.classList.remove("active"),a.classList.add("active"),o=a,s){const e=new Date(c+"T00:00:00"),a={year:"numeric",month:"long",day:"numeric",timeZone:"UTC"};try{n.textContent=`Learnings for ${e.toLocaleDateString(undefined,a)}`}catch(d){n.textContent=`Learnings for ${c}`}i.innerHTML="",s.activities&&s.activities.length>0?s.activities.forEach(e=>{const t=document.createElement("div");t.className="activity-item";const n=document.createElement("strong");n.textContent=e.title||"Activity",t.appendChild(n);const a=document.createElement("div");a.innerHTML=e.details?e.details.replace(/\n/g,"<br>"):"No details provided.",t.appendChild(a),i.appendChild(t)}):i.innerHTML="<p>No specific activities logged for this day.</p>",t.style.display="block",t.scrollIntoView({behavior:"smooth",block:"nearest"})}else n.textContent=`Learnings for ${c}`,i.innerHTML="<p>No learning entry found for this date, though it was marked as having learning.</p>",t.style.display="block"})});